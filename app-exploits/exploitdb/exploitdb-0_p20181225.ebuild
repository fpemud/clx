# Copyright 1999-2018 Gentoo Foundation
# Distributed under the terms of the GNU General Public License v2

EAPI=7

inherit eutils vcs-snapshot

EGIT_COMMIT="1b31850a46276d56a724cd47ea55403f8f9697eb"

DESCRIPTION="All exploits from exploit-db.com"
HOMEPAGE="http://www.exploit-db.com/"
SRC_URI="https://github.com/offensive-security/exploit-database/archive/${EGIT_COMMIT}.tar.gz -> ${P}.tar.gz"

LICENSE="public-domain"
SLOT="0"
KEYWORDS="~amd64 ~x86 ~arm"
IUSE=""

DEPEND=""
RDEPEND=""

src_prepare() {
	default
	epatch "${FILESDIR}/disable-update.patch"
}

src_install() {
	insinto /etc
	doins "${FILESDIR}/searchsploit_rc"

	insinto /usr/share/${PN}
	doins -r *

	fperms +x /usr/share/${PN}/searchsploit
	dosym "${EPREFIX}"/usr/share/${PN}/searchsploit /usr/bin/searchsploit
}
